<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
	<declaration>

typedef struct
{
    int     bound_lower;
    int     bound_upper;
    bool    is_single_range;
    bool    is_active;
    int     variable_id;
    bool    satisfied;
    bool    is_exclusive;
} concurrent_request_type;

typedef struct
{
    int     value;
    bool    is_set;
} concurrent_data_type;

const int SCHEDULER_PROCESSES_AMOUNT    = 7;
const int CONCURRENT_DATA_AMOUNT        = 25;
const int CONCURRENT_REQUESTS_AMOUNT    = 1;
int concurrent_select = 0;
const int INVALID_REQUEST_ID            = -1;

typedef struct
{
    concurrent_data_type    concurrent_data[ CONCURRENT_DATA_AMOUNT ];
    concurrent_request_type concurrent_requests[ CONCURRENT_REQUESTS_AMOUNT ];
    bool                    is_process_would_like_to_access[ SCHEDULER_PROCESSES_AMOUNT ];
    int                     requests_amount;
} concurrent_info_type;

broadcast chan concurrent_notify[ CONCURRENT_DATA_AMOUNT ];

concurrent_info_type concurrent_info;

broadcast chan concurrent_lock_process[ SCHEDULER_PROCESSES_AMOUNT ];

broadcast chan concurrent_init_main;
broadcast chan concurrent_can_run;
broadcast chan concurrent_lock_release;

bool concurrent_done = false;


void concurrent_init()
{
    for ( request_id : int[ 0, CONCURRENT_REQUESTS_AMOUNT - 1 ])
    {
        concurrent_info.concurrent_requests[ request_id ].is_active     = false;
        concurrent_info.concurrent_requests[ request_id ].satisfied     = true;
        concurrent_info.concurrent_requests[ request_id ].is_exclusive  = false;
    }
    
    for ( process_id : int[ 0, SCHEDULER_PROCESSES_AMOUNT - 1 ])
    {
        concurrent_info.is_process_would_like_to_access[ process_id ] = false;
    }

    for ( variable_id : int[ 0, CONCURRENT_DATA_AMOUNT - 1 ])
    {
        concurrent_info.concurrent_data[ variable_id ].is_set = false;
    }

    concurrent_info.requests_amount = 0;
}

void concurrent_satisfied_update_request_single( int variable_id, int request_index ){
    int value = concurrent_info.concurrent_data[variable_id].value;

    if ( ( variable_id == concurrent_info.concurrent_requests[request_index].variable_id ) &amp;&amp;
         ( true == concurrent_info.concurrent_requests[request_index].is_active ) ){
        
        if ( true == concurrent_info.concurrent_requests[request_index].is_single_range )
        {
            concurrent_info.concurrent_requests[request_index].satisfied = concurrent_info.concurrent_requests[request_index].satisfied &amp;&amp;
                ( ( concurrent_info.concurrent_requests[request_index].bound_lower &lt;= value ) &amp;&amp;
                  ( value &lt;= concurrent_info.concurrent_requests[request_index].bound_upper ) );
        }
        else
        {
            concurrent_info.concurrent_requests[request_index].satisfied = concurrent_info.concurrent_requests[request_index].satisfied &amp;&amp;
                ( ( value &lt;= concurrent_info.concurrent_requests[request_index].bound_lower  ) ||
                  ( concurrent_info.concurrent_requests[request_index].bound_upper &lt;= value ) );
        }
    }
    
}

void concurrent_satisfied_update_request_all( int variable_id ){
    if ( 0 &lt; concurrent_info.requests_amount ){
        int value = concurrent_info.concurrent_data[ variable_id ].value;

        for ( i : int[0, CONCURRENT_REQUESTS_AMOUNT - 1] )
        {
            concurrent_satisfied_update_request_single( variable_id, i );
        }
    }
}

int concurrent_request_add( int variable_id, concurrent_request_type &amp;request){
    int     i           = 0;
    bool    found       = false;
    int     added_index = INVALID_REQUEST_ID;

    while( ( false == found                      ) &amp;&amp;
           ( i &lt; CONCURRENT_REQUESTS_AMOUNT ) )
    {
        if ( false == concurrent_info.concurrent_requests[ i ].is_active )
        {
            concurrent_info.concurrent_requests[i]             = request;
            concurrent_info.concurrent_requests[i].satisfied   = true;
            concurrent_info.concurrent_requests[i].is_active   = true;
            concurrent_info.concurrent_requests[i].variable_id = variable_id;

            concurrent_satisfied_update_request_single( variable_id, i );
            
            found = true;

            added_index = i;

            concurrent_info.requests_amount++;
        }
        else
        {
            i++;
        }
    }

    return added_index;
}

bool concurrent_request_remove_request( int request_index ){
    if ( true == concurrent_info.concurrent_requests[request_index].is_active ){
        
        concurrent_info.concurrent_requests[request_index].is_active = false;

        concurrent_info.requests_amount--;
    }

    return concurrent_info.concurrent_requests[request_index].satisfied;
}

bool concurrent_is_satisfied( int request_index ){
    return concurrent_info.concurrent_requests[request_index].satisfied;
}

int concurrent_read( int variable_id ){
    if ( true == concurrent_info.concurrent_data[ variable_id ].is_set )
    {
        return concurrent_info.concurrent_data[ variable_id ].value;
    }
    else
    {
        return 0 / 0;
    }
}

void concurrent_write( int variable_id, int value ){
    concurrent_info.concurrent_data[ variable_id ].is_set = true;
    concurrent_info.concurrent_data[ variable_id ].value  = value;
    
    concurrent_satisfied_update_request_all( variable_id );
}

void concurrent_signal_access(  int process_id, bool value ){
    
    concurrent_info.is_process_would_like_to_access[ process_id ] = value;
}

const int CONTROL_NODES_AMOUNT          = 1;
const int CONTROL_NODES_CAN_RUN_AMOUNT  = 0;

broadcast chan control_plp_start    [ CONCURRENT_DATA_AMOUNT        ];
broadcast chan control_plp_done     [ CONCURRENT_DATA_AMOUNT        ];
broadcast chan control_node_notify  [ CONTROL_NODES_AMOUNT          ];
bool           control_node_can_run [ CONTROL_NODES_CAN_RUN_AMOUNT  ];

void initialize_variables(){
// 000: clear_path
// 001: robot_at_target
// 002: _achieve_door_unlock_repeat
concurrent_write( 2, 0 );
// 003: robot_location
// 004: at_a
concurrent_write( 4, 0 );
// 005: at_a_key
concurrent_write( 5, 100 );
// 006: at_a_doorway
concurrent_write( 6, 200 );
// 007: at_b_doorway
concurrent_write( 7, 300 );
// 008: at_b_target
concurrent_write( 8, 400 );
// 009: _achieve_move_to_destination
// 010: _achieve_move_to_repeat
concurrent_write( 10, 0 );
// 011: _achieve_move_through_doorway_repeat
concurrent_write( 11, 0 );
// 012: _achieve_key_take_repeat
concurrent_write( 12, 0 );
// 013: _achieve_door_open_repeat
concurrent_write( 13, 0 );
// 014: tmp_var
concurrent_write( 14, 700 );
// 015: path_free
// 016: distance_to_goal
// 017: _module_achieve_door_unlock
concurrent_write( 17, 0 );
// 018: _module_achieve_move_to
concurrent_write( 18, 0 );
// 019: _module_achieve_move_through_doorway
concurrent_write( 19, 0 );
// 020: _module_achieve_key_take
concurrent_write( 20, 0 );
// 021: _module_achieve_door_open
concurrent_write( 21, 0 );
// 022: _module_maintain_key_hold
concurrent_write( 22, 0 );
// 023: current_angle
concurrent_write( 23, 15 );
// 024: fuel
concurrent_write( 24, 1000 );
}


</declaration>


	<template>
		<name x="5" y="5">achieve_door_unlock</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int _variable_0000;
int _variable_0001;
int _variable_0002;

</declaration>

		<location id="id40" x="-688" y="-612">
			<name x="-747" y="-651">check_termination</name>
			<urgent/>
		</location>
		<location id="id41" x="-935" y="-816">
			<name x="-1097" y="-824">concurrent_waiting_0</name>
		</location>
		<location id="id42" x="-935" y="-952">
			<name x="-1104" y="-960">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id43" x="-629" y="-952">
			<name x="-607" y="-930">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id44" x="-527" y="-952">
			<name x="-505" y="-960">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id45" x="-527" y="-816">
			<name x="-505" y="-824">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id46" x="-391" y="-816">
			<name x="-553" y="-824">concurrent_waiting_1</name>
		</location>
		<location id="id47" x="-391" y="-952">
			<name x="-560" y="-960">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id48" x="-85" y="-952">
			<name x="-63" y="-930">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id49" x="-85" y="-1088">
			<name x="-63" y="-1066">concurrent_notify_1_1</name>
			<urgent/>
		</location>
		<location id="id50" x="17" y="-952">
			<name x="39" y="-960">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id51" x="17" y="-816">
			<name x="39" y="-824">concurrent_continue_1</name>
			<urgent/>
		</location>


        <location id="id36" x="272" y="-612">
			<name x="196" y="-578">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id23" x="612" y="-612">
			<name x="621" y="-646">end</name>
			<urgent/>
		</location>

		<location id="id25" x="-552" y="-612">
			<name x="-600" y="-671">main_success</name>
						<label kind="invariant" x="-601" y="-578">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id27" x="-1368" y="-612">
			<name x="-1385" y="-654">start</name>
		</location>
		<location id="id28" x="-1130" y="-306">
			<name x="-1138" y="-357">repeat_wait</name>
			<label kind="invariant" x="-1104" y="-289">local_time &lt;= 0</label>
		</location>
		<location id="id29" x="-1223" y="-612">
			<name x="-1248" y="-654">synced</name>
			<urgent/>
		</location>
		<location id="id33" x="-1023" y="-612">
            <name x="-1122" y="-646">checked</name>
            <urgent/>
        </location>
		<location id="id30" x="-748" y="-612">
			<name x="-957" y="-633">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id34" x="-714" y="-612">
            <name x="-680" y="-633">access_memory_end_0</name>
            <urgent/>
        </location>
		<location id="id31" x="-204" y="-612">
			<name x="-386" y="-663">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id35" x="-170" y="-612">
            <name x="-146" y="-663">access_memory_end_1</name>
            <urgent/>
        </location>


			<branchpoint id="id37" x="-853" y="-510"></branchpoint>
			<branchpoint id="id38" x="-853" y="-408"></branchpoint>


        <init ref="id27"/>

		<transition>
			<source ref="id25"/>
			<target ref="id31"/>
			<label kind="guard" x="-539" y="-646">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id37"/>
			<label kind="guard" x="-989" y="-612">// [clear_path = TRUE]
( concurrent_read( 0 ) == 1 )</label>
			<nail x="-955" y="-510"/>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-544">95</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id38"/>
			<label kind="guard" x="-989" y="-510">// [clear_path = FALSE]
( concurrent_read( 0 ) == 0 )</label>
			<nail x="-955" y="-408"/>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-442">0</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id40"/>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id25"/>
						<label kind="assignment" x="-720" y="-561">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="-1068" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-1187" y="-765">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id42"/>
			<label kind="synchronisation" x="-1165" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-595" y="-1020">concurrent_notify[17]!</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="assignment" x="-811" y="-1020">// This module is running.
concurrent_write( 17, 1 )</label>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id45"/>
			<label kind="synchronisation" x="-493" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="-493" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id34"/>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id46"/>
			<label kind="synchronisation" x="-524" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-657" y="-765">concurrent_signal_access( id, true ) ,
// For Goal:
_variable_0002 = 1</label>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id47"/>
			<label kind="synchronisation" x="-621" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="synchronisation" x="-51" y="-1020">concurrent_notify[1]!</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-51" y="-1156">concurrent_notify[17]!</label>
			<nail x="17" y="-1088"/>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id48"/>
			<label kind="assignment" x="-358" y="-1020">// For Goal:
// robot_at_target
concurrent_write( 1, _variable_0002 ) ,
// This module finished running.
concurrent_write( 17, 0 )</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id51"/>
			<label kind="synchronisation" x="51" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="51" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id35"/>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id23"/>
		</transition>


		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-1359" y="-637">control_plp_start[id]?</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id27"/>
			<label kind="guard" x="-1334" y="-263"> false == concurrent_read( 2 ) </label>
			<label kind="synchronisation" x="-1334" y="-229">control_plp_done[id]!</label>
			<nail x="612" y="-204"/>
			<nail x="-1368" y="-204"/>
		</transition>
		<transition controllable="true">
			<source ref="id29"/>
			<target ref="id33"/>
			<label kind="guard" x="-1309" y="-688">// Preconditions: []
</label>
			<label kind="assignment" x="-1189" y="-603">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id29"/>
			<label kind="guard" x="-1266" y="-442">local_time == 0</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id28"/>
			<label kind="guard" x="-1104" y="-331">true == concurrent_read( 2 )</label>
			<label kind="assignment" x="-1104" y="-306">local_time = 0</label>
			<nail x="578" y="-306"/>
		</transition>

        <transition>
            <source ref="id35"/>
            <target ref="id36"/>
        </transition>
	</template>
	<template>
		<name x="5" y="5">achieve_move_to</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int _variable_0000;
int _variable_0001;
int _variable_0002;

</declaration>

		<location id="id39" x="-688" y="-612">
			<name x="-747" y="-651">check_termination</name>
			<urgent/>
		</location>
		<location id="id40" x="-935" y="-816">
			<name x="-1097" y="-824">concurrent_waiting_0</name>
		</location>
		<location id="id41" x="-935" y="-952">
			<name x="-1104" y="-960">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id42" x="-629" y="-952">
			<name x="-607" y="-930">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id43" x="-527" y="-952">
			<name x="-505" y="-960">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id44" x="-527" y="-816">
			<name x="-505" y="-824">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id45" x="-391" y="-816">
			<name x="-553" y="-824">concurrent_waiting_1</name>
		</location>
		<location id="id46" x="-391" y="-952">
			<name x="-560" y="-960">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id47" x="-85" y="-952">
			<name x="-63" y="-930">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id48" x="-85" y="-1088">
			<name x="-63" y="-1066">concurrent_notify_1_1</name>
			<urgent/>
		</location>
		<location id="id49" x="17" y="-952">
			<name x="39" y="-960">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id50" x="17" y="-816">
			<name x="39" y="-824">concurrent_continue_1</name>
			<urgent/>
		</location>


        <location id="id36" x="272" y="-612">
			<name x="196" y="-578">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id23" x="612" y="-612">
			<name x="621" y="-646">end</name>
			<urgent/>
		</location>

		<location id="id25" x="-552" y="-612">
			<name x="-600" y="-671">main_success</name>
						<label kind="invariant" x="-601" y="-578">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id27" x="-1368" y="-612">
			<name x="-1385" y="-654">start</name>
		</location>
		<location id="id28" x="-1130" y="-306">
			<name x="-1138" y="-357">repeat_wait</name>
			<label kind="invariant" x="-1104" y="-289">local_time &lt;= 0</label>
		</location>
		<location id="id29" x="-1223" y="-612">
			<name x="-1248" y="-654">synced</name>
			<urgent/>
		</location>
		<location id="id33" x="-1023" y="-612">
            <name x="-1122" y="-646">checked</name>
            <urgent/>
        </location>
		<location id="id30" x="-748" y="-612">
			<name x="-957" y="-633">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id34" x="-714" y="-612">
            <name x="-680" y="-633">access_memory_end_0</name>
            <urgent/>
        </location>
		<location id="id31" x="-204" y="-612">
			<name x="-386" y="-663">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id35" x="-170" y="-612">
            <name x="-146" y="-663">access_memory_end_1</name>
            <urgent/>
        </location>


			<branchpoint id="id37" x="-853" y="-510"></branchpoint>


        <init ref="id27"/>

		<transition>
			<source ref="id25"/>
			<target ref="id31"/>
			<label kind="guard" x="-539" y="-646">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id37"/>
			<label kind="guard" x="-989" y="-612">// [AND [OR [robot_location = at_a] [robot_location = at_a_key] [robot_location = at_a_doorway]] [OR [destination = at_a] [destination = at_a_key] [destination = at_a_doorway]]]
( ( ( concurrent_read( 3 ) == concurrent_read( 4 ) ) ||
( concurrent_read( 3 ) == concurrent_read( 5 ) ) ||
( concurrent_read( 3 ) == concurrent_read( 6 ) ) ) &amp;&amp;
( ( concurrent_read( 9 ) == concurrent_read( 4 ) ) ||
( concurrent_read( 9 ) == concurrent_read( 5 ) ) ||
( concurrent_read( 9 ) == concurrent_read( 6 ) ) ) )</label>
			<nail x="-955" y="-510"/>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-544">100</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id39"/>
		</transition>
		<transition>
			<source ref="id39"/>
			<target ref="id25"/>
						<label kind="assignment" x="-720" y="-561">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id40"/>
			<label kind="synchronisation" x="-1068" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-1187" y="-765">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="-1165" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="synchronisation" x="-595" y="-1020">concurrent_notify[18]!</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id42"/>
			<label kind="assignment" x="-811" y="-1020">// This module is running.
concurrent_write( 18, 1 )</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-493" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="-493" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id34"/>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id45"/>
			<label kind="synchronisation" x="-524" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-657" y="-765">concurrent_signal_access( id, true ) ,
// For Goal:
_variable_0002 = 1</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id46"/>
			<label kind="synchronisation" x="-621" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id48"/>
			<label kind="synchronisation" x="-51" y="-1020">concurrent_notify[1]!</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="synchronisation" x="-51" y="-1156">concurrent_notify[18]!</label>
			<nail x="17" y="-1088"/>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id47"/>
			<label kind="assignment" x="-358" y="-1020">// For Goal:
// robot_at_target
concurrent_write( 1, _variable_0002 ) ,
// This module finished running.
concurrent_write( 18, 0 )</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="51" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="51" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id35"/>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id23"/>
		</transition>


		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-1359" y="-637">control_plp_start[id]?</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id27"/>
			<label kind="guard" x="-1334" y="-263"> false == concurrent_read( 10 ) </label>
			<label kind="synchronisation" x="-1334" y="-229">control_plp_done[id]!</label>
			<nail x="612" y="-204"/>
			<nail x="-1368" y="-204"/>
		</transition>
		<transition controllable="true">
			<source ref="id29"/>
			<target ref="id33"/>
			<label kind="guard" x="-1309" y="-688">// Preconditions: []
</label>
			<label kind="assignment" x="-1189" y="-603">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id29"/>
			<label kind="guard" x="-1266" y="-442">local_time == 0</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id28"/>
			<label kind="guard" x="-1104" y="-331">true == concurrent_read( 10 )</label>
			<label kind="assignment" x="-1104" y="-306">local_time = 0</label>
			<nail x="578" y="-306"/>
		</transition>

        <transition>
            <source ref="id35"/>
            <target ref="id36"/>
        </transition>
	</template>
	<template>
		<name x="5" y="5">achieve_move_through_doorway</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int _variable_0000;
int _variable_0001;
int _variable_0002;

</declaration>

		<location id="id40" x="-688" y="-612">
			<name x="-747" y="-651">check_termination</name>
			<urgent/>
		</location>
		<location id="id41" x="-935" y="-816">
			<name x="-1097" y="-824">concurrent_waiting_0</name>
		</location>
		<location id="id42" x="-935" y="-952">
			<name x="-1104" y="-960">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id43" x="-629" y="-952">
			<name x="-607" y="-930">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id44" x="-527" y="-952">
			<name x="-505" y="-960">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id45" x="-527" y="-816">
			<name x="-505" y="-824">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id46" x="-391" y="-816">
			<name x="-553" y="-824">concurrent_waiting_1</name>
		</location>
		<location id="id47" x="-391" y="-952">
			<name x="-560" y="-960">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id48" x="-85" y="-952">
			<name x="-63" y="-930">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id49" x="-85" y="-1088">
			<name x="-63" y="-1066">concurrent_notify_1_1</name>
			<urgent/>
		</location>
		<location id="id50" x="17" y="-952">
			<name x="39" y="-960">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id51" x="17" y="-816">
			<name x="39" y="-824">concurrent_continue_1</name>
			<urgent/>
		</location>


        <location id="id36" x="272" y="-612">
			<name x="196" y="-578">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id23" x="612" y="-612">
			<name x="621" y="-646">end</name>
			<urgent/>
		</location>

		<location id="id25" x="-552" y="-612">
			<name x="-600" y="-671">main_success</name>
						<label kind="invariant" x="-601" y="-578">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id27" x="-1368" y="-612">
			<name x="-1385" y="-654">start</name>
		</location>
		<location id="id28" x="-1130" y="-306">
			<name x="-1138" y="-357">repeat_wait</name>
			<label kind="invariant" x="-1104" y="-289">local_time &lt;= 0</label>
		</location>
		<location id="id29" x="-1223" y="-612">
			<name x="-1248" y="-654">synced</name>
			<urgent/>
		</location>
		<location id="id33" x="-1023" y="-612">
            <name x="-1122" y="-646">checked</name>
            <urgent/>
        </location>
		<location id="id30" x="-748" y="-612">
			<name x="-957" y="-633">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id34" x="-714" y="-612">
            <name x="-680" y="-633">access_memory_end_0</name>
            <urgent/>
        </location>
		<location id="id31" x="-204" y="-612">
			<name x="-386" y="-663">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id35" x="-170" y="-612">
            <name x="-146" y="-663">access_memory_end_1</name>
            <urgent/>
        </location>


			<branchpoint id="id37" x="-853" y="-510"></branchpoint>
			<branchpoint id="id38" x="-853" y="-408"></branchpoint>


        <init ref="id27"/>

		<transition>
			<source ref="id25"/>
			<target ref="id31"/>
			<label kind="guard" x="-539" y="-646">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id37"/>
			<label kind="guard" x="-989" y="-612">// [clear_path = TRUE]
( concurrent_read( 0 ) == 1 )</label>
			<nail x="-955" y="-510"/>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-544">95</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id38"/>
			<label kind="guard" x="-989" y="-510">// [clear_path = FALSE]
( concurrent_read( 0 ) == 0 )</label>
			<nail x="-955" y="-408"/>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-442">0</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id40"/>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id25"/>
						<label kind="assignment" x="-720" y="-561">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="-1068" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-1187" y="-765">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id42"/>
			<label kind="synchronisation" x="-1165" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-595" y="-1020">concurrent_notify[19]!</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="assignment" x="-811" y="-1020">// This module is running.
concurrent_write( 19, 1 )</label>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id45"/>
			<label kind="synchronisation" x="-493" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="-493" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id34"/>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id46"/>
			<label kind="synchronisation" x="-524" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-657" y="-765">concurrent_signal_access( id, true ) ,
// For Goal:
_variable_0002 = 1</label>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id47"/>
			<label kind="synchronisation" x="-621" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="synchronisation" x="-51" y="-1020">concurrent_notify[1]!</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-51" y="-1156">concurrent_notify[19]!</label>
			<nail x="17" y="-1088"/>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id48"/>
			<label kind="assignment" x="-358" y="-1020">// For Goal:
// robot_at_target
concurrent_write( 1, _variable_0002 ) ,
// This module finished running.
concurrent_write( 19, 0 )</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id51"/>
			<label kind="synchronisation" x="51" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="51" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id35"/>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id23"/>
		</transition>


		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-1359" y="-637">control_plp_start[id]?</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id27"/>
			<label kind="guard" x="-1334" y="-263"> false == concurrent_read( 11 ) </label>
			<label kind="synchronisation" x="-1334" y="-229">control_plp_done[id]!</label>
			<nail x="612" y="-204"/>
			<nail x="-1368" y="-204"/>
		</transition>
		<transition controllable="true">
			<source ref="id29"/>
			<target ref="id33"/>
			<label kind="guard" x="-1309" y="-688">// Preconditions: []
</label>
			<label kind="assignment" x="-1189" y="-603">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id29"/>
			<label kind="guard" x="-1266" y="-442">local_time == 0</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id28"/>
			<label kind="guard" x="-1104" y="-331">true == concurrent_read( 11 )</label>
			<label kind="assignment" x="-1104" y="-306">local_time = 0</label>
			<nail x="578" y="-306"/>
		</transition>

        <transition>
            <source ref="id35"/>
            <target ref="id36"/>
        </transition>
	</template>
	<template>
		<name x="5" y="5">achieve_key_take</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int _variable_0000;
int _variable_0001;
int _variable_0002;

</declaration>

		<location id="id40" x="-688" y="-612">
			<name x="-747" y="-651">check_termination</name>
			<urgent/>
		</location>
		<location id="id41" x="-935" y="-816">
			<name x="-1097" y="-824">concurrent_waiting_0</name>
		</location>
		<location id="id42" x="-935" y="-952">
			<name x="-1104" y="-960">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id43" x="-629" y="-952">
			<name x="-607" y="-930">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id44" x="-527" y="-952">
			<name x="-505" y="-960">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id45" x="-527" y="-816">
			<name x="-505" y="-824">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id46" x="-391" y="-816">
			<name x="-553" y="-824">concurrent_waiting_1</name>
		</location>
		<location id="id47" x="-391" y="-952">
			<name x="-560" y="-960">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id48" x="-85" y="-952">
			<name x="-63" y="-930">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id49" x="-85" y="-1088">
			<name x="-63" y="-1066">concurrent_notify_1_1</name>
			<urgent/>
		</location>
		<location id="id50" x="17" y="-952">
			<name x="39" y="-960">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id51" x="17" y="-816">
			<name x="39" y="-824">concurrent_continue_1</name>
			<urgent/>
		</location>


        <location id="id36" x="272" y="-612">
			<name x="196" y="-578">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id23" x="612" y="-612">
			<name x="621" y="-646">end</name>
			<urgent/>
		</location>

		<location id="id25" x="-552" y="-612">
			<name x="-600" y="-671">main_success</name>
						<label kind="invariant" x="-601" y="-578">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id27" x="-1368" y="-612">
			<name x="-1385" y="-654">start</name>
		</location>
		<location id="id28" x="-1130" y="-306">
			<name x="-1138" y="-357">repeat_wait</name>
			<label kind="invariant" x="-1104" y="-289">local_time &lt;= 0</label>
		</location>
		<location id="id29" x="-1223" y="-612">
			<name x="-1248" y="-654">synced</name>
			<urgent/>
		</location>
		<location id="id33" x="-1023" y="-612">
            <name x="-1122" y="-646">checked</name>
            <urgent/>
        </location>
		<location id="id30" x="-748" y="-612">
			<name x="-957" y="-633">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id34" x="-714" y="-612">
            <name x="-680" y="-633">access_memory_end_0</name>
            <urgent/>
        </location>
		<location id="id31" x="-204" y="-612">
			<name x="-386" y="-663">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id35" x="-170" y="-612">
            <name x="-146" y="-663">access_memory_end_1</name>
            <urgent/>
        </location>


			<branchpoint id="id37" x="-853" y="-510"></branchpoint>
			<branchpoint id="id38" x="-853" y="-408"></branchpoint>


        <init ref="id27"/>

		<transition>
			<source ref="id25"/>
			<target ref="id31"/>
			<label kind="guard" x="-539" y="-646">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id37"/>
			<label kind="guard" x="-989" y="-612">// [clear_path = TRUE]
( concurrent_read( 0 ) == 1 )</label>
			<nail x="-955" y="-510"/>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-544">95</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id38"/>
			<label kind="guard" x="-989" y="-510">// [clear_path = FALSE]
( concurrent_read( 0 ) == 0 )</label>
			<nail x="-955" y="-408"/>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-442">0</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id40"/>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id25"/>
						<label kind="assignment" x="-720" y="-561">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="-1068" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-1187" y="-765">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id42"/>
			<label kind="synchronisation" x="-1165" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-595" y="-1020">concurrent_notify[20]!</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="assignment" x="-811" y="-1020">// This module is running.
concurrent_write( 20, 1 )</label>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id45"/>
			<label kind="synchronisation" x="-493" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="-493" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id34"/>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id46"/>
			<label kind="synchronisation" x="-524" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-657" y="-765">concurrent_signal_access( id, true ) ,
// For Goal:
_variable_0002 = 1</label>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id47"/>
			<label kind="synchronisation" x="-621" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="synchronisation" x="-51" y="-1020">concurrent_notify[1]!</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-51" y="-1156">concurrent_notify[20]!</label>
			<nail x="17" y="-1088"/>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id48"/>
			<label kind="assignment" x="-358" y="-1020">// For Goal:
// robot_at_target
concurrent_write( 1, _variable_0002 ) ,
// This module finished running.
concurrent_write( 20, 0 )</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id51"/>
			<label kind="synchronisation" x="51" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="51" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id35"/>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id23"/>
		</transition>


		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-1359" y="-637">control_plp_start[id]?</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id27"/>
			<label kind="guard" x="-1334" y="-263"> false == concurrent_read( 12 ) </label>
			<label kind="synchronisation" x="-1334" y="-229">control_plp_done[id]!</label>
			<nail x="612" y="-204"/>
			<nail x="-1368" y="-204"/>
		</transition>
		<transition controllable="true">
			<source ref="id29"/>
			<target ref="id33"/>
			<label kind="guard" x="-1309" y="-688">// Preconditions: []
</label>
			<label kind="assignment" x="-1189" y="-603">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id29"/>
			<label kind="guard" x="-1266" y="-442">local_time == 0</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id28"/>
			<label kind="guard" x="-1104" y="-331">true == concurrent_read( 12 )</label>
			<label kind="assignment" x="-1104" y="-306">local_time = 0</label>
			<nail x="578" y="-306"/>
		</transition>

        <transition>
            <source ref="id35"/>
            <target ref="id36"/>
        </transition>
	</template>
	<template>
		<name x="5" y="5">achieve_door_open</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int _variable_0000;
int _variable_0001;
int _variable_0002;

</declaration>

		<location id="id40" x="-688" y="-612">
			<name x="-747" y="-651">check_termination</name>
			<urgent/>
		</location>
		<location id="id41" x="-935" y="-816">
			<name x="-1097" y="-824">concurrent_waiting_0</name>
		</location>
		<location id="id42" x="-935" y="-952">
			<name x="-1104" y="-960">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id43" x="-629" y="-952">
			<name x="-607" y="-930">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id44" x="-527" y="-952">
			<name x="-505" y="-960">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id45" x="-527" y="-816">
			<name x="-505" y="-824">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id46" x="-391" y="-816">
			<name x="-553" y="-824">concurrent_waiting_1</name>
		</location>
		<location id="id47" x="-391" y="-952">
			<name x="-560" y="-960">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id48" x="-85" y="-952">
			<name x="-63" y="-930">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id49" x="-85" y="-1088">
			<name x="-63" y="-1066">concurrent_notify_1_1</name>
			<urgent/>
		</location>
		<location id="id50" x="17" y="-952">
			<name x="39" y="-960">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id51" x="17" y="-816">
			<name x="39" y="-824">concurrent_continue_1</name>
			<urgent/>
		</location>


        <location id="id36" x="272" y="-612">
			<name x="196" y="-578">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id23" x="612" y="-612">
			<name x="621" y="-646">end</name>
			<urgent/>
		</location>

		<location id="id25" x="-552" y="-612">
			<name x="-600" y="-671">main_success</name>
						<label kind="invariant" x="-601" y="-578">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id27" x="-1368" y="-612">
			<name x="-1385" y="-654">start</name>
		</location>
		<location id="id28" x="-1130" y="-306">
			<name x="-1138" y="-357">repeat_wait</name>
			<label kind="invariant" x="-1104" y="-289">local_time &lt;= 0</label>
		</location>
		<location id="id29" x="-1223" y="-612">
			<name x="-1248" y="-654">synced</name>
			<urgent/>
		</location>
		<location id="id33" x="-1023" y="-612">
            <name x="-1122" y="-646">checked</name>
            <urgent/>
        </location>
		<location id="id30" x="-748" y="-612">
			<name x="-957" y="-633">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id34" x="-714" y="-612">
            <name x="-680" y="-633">access_memory_end_0</name>
            <urgent/>
        </location>
		<location id="id31" x="-204" y="-612">
			<name x="-386" y="-663">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id35" x="-170" y="-612">
            <name x="-146" y="-663">access_memory_end_1</name>
            <urgent/>
        </location>


			<branchpoint id="id37" x="-853" y="-510"></branchpoint>
			<branchpoint id="id38" x="-853" y="-408"></branchpoint>


        <init ref="id27"/>

		<transition>
			<source ref="id25"/>
			<target ref="id31"/>
			<label kind="guard" x="-539" y="-646">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id37"/>
			<label kind="guard" x="-989" y="-612">// [clear_path = TRUE]
( concurrent_read( 0 ) == 1 )</label>
			<nail x="-955" y="-510"/>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-544">95</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id38"/>
			<label kind="guard" x="-989" y="-510">// [clear_path = FALSE]
( concurrent_read( 0 ) == 0 )</label>
			<nail x="-955" y="-408"/>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id30"/>
			<label kind="probability" x="-853" y="-442">0</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id40"/>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id25"/>
						<label kind="assignment" x="-720" y="-561">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="-1068" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-1187" y="-765">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id42"/>
			<label kind="synchronisation" x="-1165" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-595" y="-1020">concurrent_notify[21]!</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="assignment" x="-811" y="-1020">// This module is running.
concurrent_write( 21, 1 )</label>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id45"/>
			<label kind="synchronisation" x="-493" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="-493" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id34"/>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id46"/>
			<label kind="synchronisation" x="-524" y="-782">concurrent_can_run!</label>
			<label kind="assignment" x="-657" y="-765">concurrent_signal_access( id, true ) ,
// For Goal:
_variable_0002 = 1</label>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id47"/>
			<label kind="synchronisation" x="-621" y="-918">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="synchronisation" x="-51" y="-1020">concurrent_notify[1]!</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-51" y="-1156">concurrent_notify[21]!</label>
			<nail x="17" y="-1088"/>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id48"/>
			<label kind="assignment" x="-358" y="-1020">// For Goal:
// robot_at_target
concurrent_write( 1, _variable_0002 ) ,
// This module finished running.
concurrent_write( 21, 0 )</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id51"/>
			<label kind="synchronisation" x="51" y="-918">concurrent_lock_release!</label>
			<label kind="assignment" x="51" y="-901">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id35"/>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id23"/>
		</transition>


		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-1359" y="-637">control_plp_start[id]?</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id27"/>
			<label kind="guard" x="-1334" y="-263"> false == concurrent_read( 13 ) </label>
			<label kind="synchronisation" x="-1334" y="-229">control_plp_done[id]!</label>
			<nail x="612" y="-204"/>
			<nail x="-1368" y="-204"/>
		</transition>
		<transition controllable="true">
			<source ref="id29"/>
			<target ref="id33"/>
			<label kind="guard" x="-1309" y="-688">// Preconditions: []
</label>
			<label kind="assignment" x="-1189" y="-603">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id29"/>
			<label kind="guard" x="-1266" y="-442">local_time == 0</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id28"/>
			<label kind="guard" x="-1104" y="-331">true == concurrent_read( 13 )</label>
			<label kind="assignment" x="-1104" y="-306">local_time = 0</label>
			<nail x="578" y="-306"/>
		</transition>

        <transition>
            <source ref="id35"/>
            <target ref="id36"/>
        </transition>
	</template>
	<template>
		<name x="9" y="9">maintain_key_hold</name>
		<parameter>int id</parameter>
		<declaration>
clock local_time;

int wait                   = 2;

int _variable_0000;
int _variable_0001;
int _variable_0002;
concurrent_request_type _request_0000;


		</declaration>
		<location id="id55" x="1190" y="-170">
			<name x="1139" y="-204">main_done</name>
			<urgent/>
		</location>
		<location id="id75" x="1649" y="-170">
			<name x="1550" y="-145">sort_concurrent_results</name>
			<urgent/>
		</location>
		<location id="id56" x="2074" y="-170">
			<name x="2091" y="-196">end</name>
			<urgent/>
		</location>
		<location id="id57" x="782" y="-170">
			<name x="773" y="-204">main_success</name>
						<label kind="invariant" x="733" y="-136">( local_time &lt;= _variable_0001 )</label>

		</location>

		<location id="id62" x="68" y="-170">
			<name x="26" y="-196">start</name>
		</location>
		<location id="id63" x="459" y="-170">
			<name x="382" y="-229">wait_maintain_true</name>
						<urgent/>

		</location>

		<location id="id74" x="409" y="-170">
			<name x="332" y="-229">pre_wait_maintain_true</name>
			<urgent/>
		</location>

		<location id="id64" x="578" y="-170">
			<name x="416" y="-229">access_memory_start_0</name>
			<urgent/>
		</location>
		<location id="id72" x="612" y="-170">
            <name x="624" y="-229">access_memory_end_0</name>
            <urgent/>
        </location>

		<location id="id65" x="1258" y="-170">
			<name x="1096" y="-238">access_memory_start_1</name>
			<urgent/>
		</location>
		<location id="id73" x="1292" y="-170">
            <name x="1300" y="-220">access_memory_end_1</name>
            <urgent/>
        </location>

        <location id="id60" x="187" y="-170">
            <name x="161" y="-212">synced</name>
            <urgent/>
		</location>
		<location id="id70" x="306" y="-170">
            <name x="272" y="-212">checked</name>
            <urgent/>
        </location>



		<location id="id77" x="646" y="-170">
			<name x="587" y="-209">check_termination</name>
			<urgent/>
		</location>
		<location id="id76" x="1190" y="102">
			<name x="1124" y="124">failure_termination</name>
		</location>
		<location id="id78" x="391" y="-374">
			<name x="229" y="-382">concurrent_waiting_0</name>
		</location>
		<location id="id79" x="391" y="-510">
			<name x="222" y="-518">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id80" x="697" y="-510">
			<name x="719" y="-488">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id81" x="697" y="-646">
			<name x="719" y="-624">concurrent_notify_1_0</name>
			<urgent/>
		</location>
		<location id="id82" x="799" y="-510">
			<name x="821" y="-518">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id83" x="799" y="-374">
			<name x="821" y="-382">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id84" x="1071" y="-374">
			<name x="909" y="-382">concurrent_waiting_1</name>
		</location>
		<location id="id85" x="1071" y="-510">
			<name x="902" y="-518">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id86" x="1377" y="-510">
			<name x="1399" y="-488">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id87" x="1479" y="-510">
			<name x="1501" y="-518">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id88" x="1479" y="-374">
			<name x="1501" y="-382">concurrent_continue_1</name>
			<urgent/>
		</location>
		<location id="id89" x="1955" y="-238">
			<name x="1934" y="-277">fail_0</name>
		</location>




		<init ref="id62"/>

		<transition>
			<source ref="id63"/>
			<target ref="id64"/>
		</transition>
		<transition>
			<source ref="id57"/>
			<target ref="id55"/>
			<label kind="guard" x="825" y="-204">( _variable_0000 &lt;= local_time ) &amp;&amp;
( local_time &lt;= _variable_0001 )</label>
		</transition>
		<transition>
			<source ref="id72"/>
			<target ref="id77"/>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id57"/>
						<label kind="assignment" x="614" y="-119">_variable_0000 = 4,
_variable_0001 = 6</label>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id55"/>
			<label kind="guard" x="864" y="-102">// [distance_to_goal &lt;= 2]
( concurrent_read( 16 ) &lt;= 200 )</label>
			<nail x="850" y="-102"/>
			<nail x="1122" y="-102"/>
		</transition>
		<transition>
			<source ref="id57"/>
			<target ref="id55"/>
			<label kind="guard" x="864" y="-34">// [distance_to_goal &lt;= 2]
( concurrent_read( 16 ) &lt;= 200 )</label>
			<label kind="synchronisation" x="909" y="0">concurrent_notify[16]?</label>
			<nail x="850" y="-34"/>
			<nail x="1122" y="-34"/>
		</transition>
		<transition>
			<source ref="id57"/>
			<target ref="id76"/>
			<label kind="guard" x="850" y="34">// [[distance_to_goal &lt;= 3]]
( ( concurrent_read( 16 ) &lt;= 300 ) )</label>
			<label kind="synchronisation" x="909" y="68">concurrent_notify[16]?</label>
			<nail x="850" y="34"/>
			<nail x="1122" y="34"/>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id76"/>
			<label kind="guard" x="850" y="102">// [[distance_to_goal &lt;= 3]]
( ( concurrent_read( 16 ) &lt;= 300 ) )</label>
			<nail x="850" y="102"/>
		</transition>
		<transition>
			<source ref="id64"/>
			<target ref="id78"/>
			<label kind="synchronisation" x="258" y="-340">concurrent_can_run!</label>
			<label kind="assignment" x="111" y="-323">concurrent_signal_access( id, true ),
// [path_free = TRUE]
_request_0000.bound_lower        = 1,
_request_0000.bound_upper        = 1,
_request_0000.is_single_range    = true,
_request_0000.variable_id        = 15</label>
		</transition>
		<transition>
			<source ref="id78"/>
			<target ref="id79"/>
			<label kind="synchronisation" x="161" y="-476">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id81"/>
			<label kind="synchronisation" x="731" y="-578">concurrent_notify[14]!</label>
		</transition>
		<transition>
			<source ref="id81"/>
			<target ref="id82"/>
			<label kind="synchronisation" x="731" y="-714">concurrent_notify[22]!</label>
			<nail x="799" y="-646"/>
		</transition>
		<transition>
			<source ref="id79"/>
			<target ref="id80"/>
			<label kind="assignment" x="263" y="-578">// [path_free = TRUE]
_variable_0002 = concurrent_request_add( 15, _request_0000 ) ,
// [tmp_var = 7.05]
concurrent_write( 14, 705 ) ,
// This module is running.
concurrent_write( 22, 1 )</label>
		</transition>
		<transition>
			<source ref="id82"/>
			<target ref="id83"/>
			<label kind="synchronisation" x="833" y="-476">concurrent_lock_release!</label>
			<label kind="assignment" x="833" y="-459">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id83"/>
			<target ref="id72"/>
		</transition>
		<transition>
			<source ref="id65"/>
			<target ref="id84"/>
			<label kind="synchronisation" x="938" y="-340">concurrent_can_run!</label>
			<label kind="assignment" x="819" y="-323">concurrent_signal_access( id, true )</label>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id85"/>
			<label kind="synchronisation" x="841" y="-476">concurrent_lock_process[id]?</label>
		</transition>
		<transition>
			<source ref="id86"/>
			<target ref="id87"/>
			<label kind="synchronisation" x="1411" y="-578">concurrent_notify[22]!</label>
		</transition>
		<transition>
			<source ref="id85"/>
			<target ref="id86"/>
			<label kind="assignment" x="887" y="-578">_variable_0002 = concurrent_request_remove_request( _variable_0002 ) ,
// This module finished running.
concurrent_write( 22, 0 )</label>
		</transition>
		<transition>
			<source ref="id87"/>
			<target ref="id88"/>
			<label kind="synchronisation" x="1513" y="-476">concurrent_lock_release!</label>
			<label kind="assignment" x="1513" y="-459">concurrent_signal_access( id, false )</label>
		</transition>
		<transition>
			<source ref="id88"/>
			<target ref="id73"/>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id89"/>
			<label kind="guard" x="1717" y="-238">( _variable_0002 == false )</label>
			<nail x="1717" y="-238"/>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id56"/>
			<label kind="guard" x="1717" y="-170">( _variable_0002 == true )</label>
		</transition>





		<transition>
			<source ref="id74"/>
			<target ref="id63"/>
						<label kind="guard" x="459" y="-170">( local_time == 0 )</label>

		</transition>
		<transition>
			<source ref="id55"/>
			<target ref="id65"/>
		</transition>




		<transition controllable="true">
            <source ref="id60"/>
            <target ref="id70"/>
            <label kind="guard" x="51" y="-255">// Preconditions: []
</label>
            <label kind="assignment" x="180" y="-150">local_time = 0</label>
        </transition>

		<transition>
			<source ref="id56"/>
			<target ref="id62"/>
			<label kind="synchronisation" x="76" y="314">control_plp_done[id]!</label>
			<nail x="2074" y="340"/>
			<nail x="68" y="340"/>
		</transition>

		<transition>
			<source ref="id62"/>
			<target ref="id60"/>
			<label kind="synchronisation" x="76" y="-195">control_plp_start[id]?</label>
		</transition>

        <transition>
            <source ref="id73"/>
            <target ref="id75"/>
        </transition>
	</template>




	<template>
		<name>node_sequential_start</name>
		<parameter>int node_id, int concurrent_process_id</parameter>
		<declaration>
clock local_time;
		</declaration>
		<location id="id2" x="272" y="238">
			<name x="202" y="199">concurrent_waiting_0</name>
		</location>
		<location id="id3" x="476" y="238">
			<name x="403" y="199">concurrent_got_lock_0</name>
			<urgent/>
		</location>
		<location id="id4" x="476" y="374">
			<name x="403" y="396">concurrent_notify_0_0</name>
			<urgent/>
		</location>
		<location id="id5" x="476" y="442">
			<name x="410" y="464">concurrent_unlock_0</name>
			<urgent/>
		</location>
		<location id="id6" x="272" y="442">
			<name x="199" y="464">concurrent_continue_0</name>
			<urgent/>
		</location>
		<location id="id9" x="272" y="646">
			<name x="202" y="607">concurrent_waiting_1</name>
		</location>
		<location id="id10" x="476" y="646">
			<name x="403" y="607">concurrent_got_lock_1</name>
			<urgent/>
		</location>
		<location id="id11" x="476" y="782">
			<name x="403" y="804">concurrent_notify_0_1</name>
			<urgent/>
		</location>
		<location id="id12" x="476" y="850">
			<name x="410" y="872">concurrent_unlock_1</name>
			<urgent/>
		</location>
		<location id="id13" x="272" y="850">
			<name x="199" y="872">concurrent_continue_1</name>
			<urgent/>
		</location>
		<location id="id14" x="0" y="0">
			<name x="-57" y="-8">start</name>
		</location>
		<location id="id15" x="0" y="136">
			<name x="-57" y="128">ready</name>
			<urgent/>
		</location>
		<location id="id0" x="0" y="272">
			<name x="-64" y="264">wait_0</name>
			<label kind="invariant" x="22" y="294">( local_time &lt;= 200 )</label>
		</location>
		<location id="id1" x="0" y="408">
			<name x="-113" y="400">plp_running_0</name>
		</location>
		<location id="id16" x="0" y="544">
			<name x="-92" y="536">plp_done_0</name>
			<urgent/>
		</location>
		<location id="id7" x="0" y="680">
			<name x="-64" y="672">wait_1</name>
			<label kind="invariant" x="22" y="702">( local_time &lt;= 100 )</label>
		</location>
		<location id="id8" x="0" y="816">
			<name x="-113" y="808">plp_running_1</name>
		</location>
		<location id="id17" x="0" y="952">
			<name x="-92" y="944">plp_done_1</name>
			<urgent/>
		</location>
		<location id="id18" x="0" y="1088">
			<name x="-113" y="1080">all_plps_done</name>
			<urgent/>
		</location>
		<location id="id19" x="0" y="1224">
			<name x="-50" y="1216">done</name>
		</location>
		<init ref="id14"/>
		<transition>
			<source ref="id0"/>
			<target ref="id2"/>
			<label kind="guard" x="125" y="272">( local_time == 200 )</label>
			<label kind="synchronisation" x="139" y="289">concurrent_can_run!</label>
			<label kind="assignment" x="-113" y="306">concurrent_signal_access( concurrent_process_id, true )</label>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id3"/>
			<label kind="synchronisation" x="210" y="170">concurrent_lock_process[concurrent_process_id]?</label>
		</transition>
		<transition>
			<source ref="id4"/>
			<target ref="id5"/>
			<label kind="synchronisation" x="501" y="374">concurrent_notify[16]!</label>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id4"/>
			<label kind="assignment" x="510" y="272">concurrent_write( 16, 900 )</label>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id6"/>
			<label kind="synchronisation" x="290" y="510">concurrent_lock_release!</label>
			<label kind="assignment" x="178" y="527">concurrent_signal_access( concurrent_process_id, false )</label>
		</transition>
		<transition>
			<source ref="id6"/>
			<target ref="id1"/>
			<label kind="synchronisation" x="91" y="442">control_plp_start[1]!</label>
		</transition>
		<transition>
			<source ref="id7"/>
			<target ref="id9"/>
			<label kind="guard" x="125" y="680">( local_time == 100 )</label>
			<label kind="synchronisation" x="139" y="697">concurrent_can_run!</label>
			<label kind="assignment" x="-113" y="714">concurrent_signal_access( concurrent_process_id, true )</label>
		</transition>
		<transition>
			<source ref="id9"/>
			<target ref="id10"/>
			<label kind="synchronisation" x="210" y="578">concurrent_lock_process[concurrent_process_id]?</label>
		</transition>
		<transition>
			<source ref="id11"/>
			<target ref="id12"/>
			<label kind="synchronisation" x="501" y="782">concurrent_notify[16]!</label>
		</transition>
		<transition>
			<source ref="id10"/>
			<target ref="id11"/>
			<label kind="assignment" x="510" y="680">concurrent_write( 16, 800 )</label>
		</transition>
		<transition>
			<source ref="id12"/>
			<target ref="id13"/>
			<label kind="synchronisation" x="290" y="918">concurrent_lock_release!</label>
			<label kind="assignment" x="178" y="935">concurrent_signal_access( concurrent_process_id, false )</label>
		</transition>
		<transition>
			<source ref="id13"/>
			<target ref="id8"/>
			<label kind="synchronisation" x="91" y="850">control_plp_start[3]!</label>
		</transition>
		<transition>
			<source ref="id14"/>
			<target ref="id15"/>
			<label kind="synchronisation" x="-203" y="68">control_node_notify[node_id]?</label>
			<label kind="assignment" x="-98" y="85">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id15"/>
			<target ref="id0"/>
			<label kind="assignment" x="-98" y="204">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id16"/>
			<label kind="synchronisation" x="-140" y="476">control_plp_done[1]?</label>
		</transition>
		<transition>
			<source ref="id16"/>
			<target ref="id7"/>
			<label kind="assignment" x="-98" y="612">local_time = 0</label>
		</transition>
		<transition>
			<source ref="id8"/>
			<target ref="id17"/>
			<label kind="synchronisation" x="-140" y="884">control_plp_done[3]?</label>
		</transition>
		<transition>
			<source ref="id17"/>
			<target ref="id18"/>
		</transition>
		<transition>
			<source ref="id18"/>
			<target ref="id19"/>
		</transition>
	</template>

	<template>
		<name>concurrent</name>
		<parameter></parameter>
		<declaration>
		int process_access_granted_id = -1;
		clock time;
        </declaration>
		<location id="id68" x="-1156" y="-204">
			<name x="-1198" y="-246">init_state</name>
		</location>
		<location id="id69" x="-408" y="-34">
			<name x="-433" y="-93">selected</name>
			<urgent/>
		</location>
		<location id="id70" x="0" y="-34">
			<name x="-68" y="-93">waiting_plp_done</name>
		</location>
		<location id="id71" x="-884" y="-34">
			<name x="-909" y="-93">choose</name>
			<urgent/>
		</location>
		<location id="id72" x="-1020" y="-34">
			<name x="-1062" y="-93">wait_to_run</name>
		</location>
		<location id="id73" x="-374" y="306">
			<name x="-382" y="255">released</name>
			<urgent/>
		</location>
		<init ref="id68"/>
		<transition>
			<source ref="id70"/>
			<target ref="id73"/>
			<label kind="synchronisation" x="-348" y="289">concurrent_lock_release?</label>
			<nail x="0" y="306"/>
		</transition>
		<transition>
			<source ref="id73"/>
			<target ref="id71"/>
			<label kind="guard" x="-875" y="127">
(concurrent_info.is_process_would_like_to_access[0] == true) ||
(concurrent_info.is_process_would_like_to_access[1] == true) ||
(concurrent_info.is_process_would_like_to_access[2] == true) ||
(concurrent_info.is_process_would_like_to_access[3] == true) ||
(concurrent_info.is_process_would_like_to_access[4] == true) ||
(concurrent_info.is_process_would_like_to_access[5] == true) ||
(concurrent_info.is_process_would_like_to_access[6] == true)
            </label>
			<nail x="-408" y="204"/>
			<nail x="-884" y="204"/>
		</transition>
		<transition>
			<source ref="id72"/>
			<target ref="id71"/>
			<label kind="synchronisation" x="-1028" y="-76">concurrent_can_run?</label>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id72"/>
			<label kind="synchronisation" x="-1147" y="-161">concurrent_init_main?</label>
			<label kind="assignment" x="-1138" y="-34">time = 0</label>
			<nail x="-1156" y="-34"/>
		</transition>
		<transition>
			<source ref="id69"/>
			<target ref="id70"/>
			<label kind="synchronisation" x="-391" y="-68">concurrent_lock_process[process_access_granted_id]!</label>
		</transition>
		<transition>
			<source ref="id73"/>
			<target ref="id72"/>
			<label kind="guard" x="-1011" y="331">
(concurrent_info.is_process_would_like_to_access[0] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[1] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[2] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[3] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[4] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[5] == false) &amp;&amp;
(concurrent_info.is_process_would_like_to_access[6] == false)
            </label>
			<label kind="assignment" x="-1088" y="127">time = 0</label>
			<nail x="-408" y="408"/>
			<nail x="-1020" y="408"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-320">concurrent_info.is_process_would_like_to_access[0]</label>
			<label kind="assignment" x="-755" y="-300">process_access_granted_id = 0</label>
			<nail x="-860" y="-300"/>
			<nail x="-420" y="-300"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-290">concurrent_info.is_process_would_like_to_access[1]</label>
			<label kind="assignment" x="-755" y="-270">process_access_granted_id = 1</label>
			<nail x="-860" y="-270"/>
			<nail x="-420" y="-270"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-260">concurrent_info.is_process_would_like_to_access[2]</label>
			<label kind="assignment" x="-755" y="-240">process_access_granted_id = 2</label>
			<nail x="-860" y="-240"/>
			<nail x="-420" y="-240"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-230">concurrent_info.is_process_would_like_to_access[3]</label>
			<label kind="assignment" x="-755" y="-210">process_access_granted_id = 3</label>
			<nail x="-860" y="-210"/>
			<nail x="-420" y="-210"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-200">concurrent_info.is_process_would_like_to_access[4]</label>
			<label kind="assignment" x="-755" y="-180">process_access_granted_id = 4</label>
			<nail x="-860" y="-180"/>
			<nail x="-420" y="-180"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-170">concurrent_info.is_process_would_like_to_access[5]</label>
			<label kind="assignment" x="-755" y="-150">process_access_granted_id = 5</label>
			<nail x="-860" y="-150"/>
			<nail x="-420" y="-150"/>
		</transition>
		
		<transition>
			<source ref="id71"/>
			<target ref="id69"/>
			<label kind="guard" x="-825" y="-140">concurrent_info.is_process_would_like_to_access[6]</label>
			<label kind="assignment" x="-755" y="-120">process_access_granted_id = 6</label>
			<nail x="-860" y="-120"/>
			<nail x="-420" y="-120"/>
		</transition>

	</template>
	<template>
		<name>control_graph_init</name>
		<declaration>clock local_time;</declaration>
		<location id="id126" x="-272" y="-34">
			<name x="-255" y="-51">start</name>
			<urgent/>
		</location>
		<location id="id127" x="-272" y="170">
			<name x="-255" y="153">concurrent_started</name>
			<urgent/>
		</location>
		<location id="id128" x="-272" y="68">
			<name x="-255" y="51">concurrent_data_initialized</name>
			<urgent/>
		</location>
		<location id="id129" x="-272" y="272">
		</location>
		<init ref="id126"/>
		<transition>
			<source ref="id127"/>
			<target ref="id129"/>
			<label kind="synchronisation" x="-263" y="204">control_node_notify[0]!</label>
		</transition>
		<transition>
			<source ref="id128"/>
			<target ref="id127"/>
			<label kind="synchronisation" x="-263" y="110">concurrent_init_main!</label>
		</transition>
		<transition>
			<source ref="id126"/>
			<target ref="id128"/>
			<label kind="assignment" x="-263" y="8">concurrent_init(),
initialize_variables()</label>
		</transition>
	</template>
	<system>// Place template instantiations here.

concurrent_process         = concurrent();
control_graph_init_process = control_graph_init();
achieve_door_unlock_process = achieve_door_unlock( 0 );
achieve_move_to_process = achieve_move_to( 1 );
achieve_move_through_doorway_process = achieve_move_through_doorway( 2 );
achieve_key_take_process = achieve_key_take( 3 );
achieve_door_open_process = achieve_door_open( 4 );
maintain_key_hold_process = maintain_key_hold( 5 );
node_sequential_start_process = node_sequential_start( 0, 6 );
system concurrent_process, control_graph_init, achieve_door_unlock_process, 
       achieve_move_to_process, achieve_move_through_doorway_process, achieve_key_take_process, 
       achieve_door_open_process, maintain_key_hold_process, node_sequential_start_process;
</system>
	<queries>
		<query>
			<formula>E&lt;&gt; node_condition_2_process.main
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>Pr[&lt;=10000] ( &lt;&gt; node_condition_2_process.main  )
			</formula>
			<comment>
			</comment>
		</query>
	</queries>
</nta>
